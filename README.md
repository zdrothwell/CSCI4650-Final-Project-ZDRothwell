# CSCI4650 Final Project Dynamic Photo Hosting Website 
 Final Project for Intro to Cloud Computing course with an AWS website deployment package for a photo hosting website

## Getting Started
The first things you will need to ensure you have setup are an IAM profile with an Access Key and Secret Key, and a VPC with at least two subnets routed into an internet gateway to create the availability zone for the RDS database that will be deployed later on.

This is what the VPC Resource Map should look like to get started:

![alt text](image.png)


## Starting an EC2 Instance
Now that we have our VPC up and ready to go, this is where get started by deploying an EC2 instance in whatever region you choose. If you decide to use a region that is not us-east-2, make sure you change the variable in the deploy_all.py file once you are in the EC2 instance using whatever file editor you wish.

Start by going to the EC2 page on AWS. Click "Launch Instance" and go ahead and name it whatever you wish. Select a Key Pair or generate a new one if you need to do so, then click "Edit" in the Network Settings section. You will need to create two new Inbound Rules. One for port 80 (HTTP) and one for port 5000. The source can be anywhere or just your device if you are the only person connecting to it.

Once you have the Inbound Rules for the Security Group set, go ahead and click "Launch Instance". 

After it has launched, click its name in the Instances list and click "Connect". Using EC2 Instance Connect, go ahead and hit the orange "Connect" button at the bottom right. Once you are in the terminal, set up the EC2 instance by running these commands:

```aws configure```

    - This is where you will need the Access Key, Secret Key, and Region you defined/chose earlier. The fourth setting just leave blank and hit enter.

```
sudo dnf install python3-pip git -y
git clone https://github.com/zdrothwell/CSCI4650-Final-Project-ZDRothwell.git website
cd website
pip3 install -r requirements.txt
python3 deploy_all.py
```

After all these commands have run, open your S3 bucket that should be named "cloudgallery-#######". Go to the permissions tab, and paste in the following JSON bucket policy:

```
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AddPerm",
      "Effect": "Allow",
      "Principal": "*",
      "Action": [
        "s3:PutObject",
        "s3:PutObjectAcl",
        "s3:GetObject"
      ],
      "Resource": "arn:aws:s3:::###########/*"
    }
  ]
}
```

Replace the #'s with the ARN above the text box to have the resource listed be the bucket you are working in. This allows public access for the bucket so that the pictures show up.

Here is an example of what the line should look like:

``` "Resource": "arn:aws:s3:::cloudgallery-c4ecee62/*" ```

Once the RDS database has been fully setup and created, the config files are already generated for you, so the last thing you need to do to get this barebones cloud website up and running is to run the file "app.py" using the command:

```python3 app.py```

## Using the Application
You've done it. You have started the CloudGallery Application using AWS. To access the website, get the public IP of the EC2 instance and open it in a new tab like this:

``` http://EC2-IP:5000 ```

You should be greeted with an index page that says to login. Go ahead and click that. You will be prompted with the login screen, but you have no users in the Cognito user pool that was generated by deploy_app.py. To create one, go to the signup screen as prompted by the hyperlink under the login button. Create a username and password. It may require 8 characters, an uppercase letter, a number, and a special character. 

After you signup successfully, it will prompt you directly into the gallery page, which is currently empty. If you wish to test the login, click the "CloudGallery" name at the top left which will route you back to the index page and you can login again. While at the gallery page, click "Upload New Image" at the top right of the screen. Select a file on your computer and give it a title and a description and hit "Upload". This will automatically redirect you to the gallery page where you will now see the photo, the title, the description, and the metadata for the post. This way you can see which user posted what photo, at what time.

You can continue to upload photos as much as you want. I have not added functionality to delete them yet, so if you wish to do so, you will need to directly delete a photo from the S3 Bucket. 

Make sure to clean up any running services from AWS when done if you want to not use up all your credits and be charged for services. That will be an EC2 instance, an S3 bucket, a Cognito user pool, and an RDS database. 

# Thank You!